{% extends "base.html" %}

{% block content %}
<h1>Manage Calls</h1>
<table>
    <tr>
        <th>Call ID</th>
        <th>Type</th>
        <th>Location</th>
        <th>Description</th>
        <th>Status</th>
        <th>Timestamp</th>
        <th>Actions</th>
    </tr>
    {% for call in calls %}
    <tr>
        <td>{{ call.id }}</td>
        <td>{{ call.call_type }}</td>
        <td>{{ call.location }}</td>
        <td>{{ call.description }}</td>
        <td>{{ call.status }}</td>
        <td>{{ call.timestamp }}</td>
        <td>
            <form method="POST" action="{{ url_for('assign_unit', call_id=call.id) }}">
                <select name="unit_id">
                    {% for unit in units %}
                    <option value="{{ unit.id }}">{{ unit.id }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Assign Unit</button>
            </form>
            <form method="POST" action="{{ url_for('update_call_status', call_id=call.id) }}">
                <select name="status">
                    <option value="Pending">Pending</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Completed">Completed</option>
                </select>
                <button type="submit">Update Status</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
